<template>
  <div class="stepper">
    <div class="top">
      <div class="back-button" :class="{ disabled: modelValue > steps}" @click="goBack">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <g clip-path="url(#clip0_420_6313)">
            <path d="M12 3C10.22 3 8.47991 3.52784 6.99987 4.51677C5.51983 5.50571 4.36628 6.91131 3.68509 8.55585C3.0039 10.2004 2.82567 12.01 3.17294 13.7558C3.5202 15.5016 4.37737 17.1053 5.63604 18.364C6.89471 19.6226 8.49836 20.4798 10.2442 20.8271C11.99 21.1743 13.7996 20.9961 15.4442 20.3149C17.0887 19.6337 18.4943 18.4802 19.4832 17.0001C20.4722 15.5201 21 13.78 21 12C20.9975 9.61382 20.0485 7.3261 18.3612 5.63882C16.6739 3.95154 14.3862 3.00252 12 3ZM15.4615 12.6923H10.2095L11.7975 14.2794C11.8618 14.3437 11.9128 14.4201 11.9477 14.5041C11.9825 14.5882 12.0004 14.6783 12.0004 14.7692C12.0004 14.8602 11.9825 14.9503 11.9477 15.0343C11.9128 15.1184 11.8618 15.1947 11.7975 15.259C11.7332 15.3234 11.6568 15.3744 11.5728 15.4092C11.4887 15.444 11.3987 15.4619 11.3077 15.4619C11.2167 15.4619 11.1267 15.444 11.0426 15.4092C10.9586 15.3744 10.8822 15.3234 10.8179 15.259L8.04866 12.4898C7.98429 12.4255 7.93322 12.3492 7.89838 12.2651C7.86354 12.1811 7.84561 12.091 7.84561 12C7.84561 11.909 7.86354 11.8189 7.89838 11.7349C7.93322 11.6508 7.98429 11.5745 8.04866 11.5102L10.8179 8.74096C10.9478 8.61105 11.124 8.53808 11.3077 8.53808C11.4914 8.53808 11.6676 8.61105 11.7975 8.74096C11.9274 8.87086 12.0004 9.04705 12.0004 9.23077C12.0004 9.41448 11.9274 9.59067 11.7975 9.72058L10.2095 11.3077H15.4615C15.6452 11.3077 15.8212 11.3806 15.9511 11.5105C16.0809 11.6403 16.1538 11.8164 16.1538 12C16.1538 12.1836 16.0809 12.3597 15.9511 12.4895C15.8212 12.6194 15.6452 12.6923 15.4615 12.6923Z" :fill="modelValue <= steps ? 'black' : '#888888'"/>
          </g>
          <defs>
            <clipPath id="clip0_420_6313">
              <rect width="24" height="24" fill="white"/>
            </clipPath>
          </defs>
        </svg>

        <p>Back</p>
      </div>
      <p v-if="modelValue <= steps" class="title-md">Step {{ modelValue }} of {{ steps }}</p>
      <p v-else>Completed!</p>
    </div>

    <div class="steps-wrapper">
      <div v-for="step in steps" :key="step" class="step" :class="{ active: modelValue >= step }"></div>
    </div>
  </div>
</template>

<script setup>
const emit = defineEmits([ "update:modelValue" ])

const props = defineProps({
  modelValue: Number,
  steps: Number,
})

function goBack() {
  if (props.modelValue >= 2 && props.modelValue < steps + 1) {
    emit("update:modelValue", props.modelValue - 1)
  }
}
</script>
